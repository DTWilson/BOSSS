[{"path":"https://dtwilson.github.io/BOSSS/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"MIT License","title":"MIT License","text":"Copyright (c) 2021 Duncan Wilson Permission hereby granted, free charge, person obtaining copy software associated documentation files (“Software”), deal Software without restriction, including without limitation rights use, copy, modify, merge, publish, distribute, sublicense, /sell copies Software, permit persons Software furnished , subject following conditions: copyright notice permission notice shall included copies substantial portions Software. SOFTWARE PROVIDED “”, WITHOUT WARRANTY KIND, EXPRESS IMPLIED, INCLUDING LIMITED WARRANTIES MERCHANTABILITY, FITNESS PARTICULAR PURPOSE NONINFRINGEMENT. EVENT SHALL AUTHORS COPYRIGHT HOLDERS LIABLE CLAIM, DAMAGES LIABILITY, WHETHER ACTION CONTRACT, TORT OTHERWISE, ARISING , CONNECTION SOFTWARE USE DEALINGS SOFTWARE.","code":""},{"path":[]},{"path":"https://dtwilson.github.io/BOSSS/articles/BOSSS.html","id":"problem","dir":"Articles","previous_headings":"Adaptive design","what":"Problem","title":"BOSSS","text":"first ingredient BOSSS problem simulation function. arguments function must first specify design variables want vary problem, followed model parameters. example two design variables representing number clusters arm, number participants arm. model parameters mean difference outcome control experimental arms (beta_1), within-cluster standard deviation (sig_w), -cluster standard deviation (sig_b). Note inputs require defaults provided. element interface simulation function must conform return value, named vector quantities ’s mean values want estimate using Monte Carlo method. , one quantity: boolean indicator negative decision, s. problem just interested expected value s; also want minimise number clusters number participants, put upper limit number participants per cluster. Since fixed quantities given design, evaluate separate deterministic function. conform principles simulation function, inputs, allowing different named outputs. , outputs just k, n, m = n/k: Next, need note ranges design variables plan search . use design_space() function , specifying lower upper limits design variables order appear simulation function arguments: Note function automatically retrieves names design variables based order take simulation function. also need specify hypotheses ’re planning simulate , using hypotheses() function, specifying order parameters appear simulation function argument. need one hypothesis , alternative, since estimating type II error rate. Constraints specified using constraints function. constraint named, defined respect specific output specific hypothesis. nominal maximum value, probability delta used judge satisfied. , fist constraint mean simulation output (.e. probability negative result) alt hypothesis less equal 0.2 probability least 0.95. second constraint cluster size m alt hypothesis must less equal 10 - note provide value delta, isn’t used since constraint deterministic. Finally, note whether constraint output binary otherwise. final ingredient problem set objectives want minimise. Similar constraints, objectives tied specific output hypothesis. also specify weights objective help guide internal optimisation process, note whether output objective binary continuous. example, want minimise number patients n number clusters k, latter carrying weight 100 times former. now put simulation function set data frames together create object class BOSSS_problem.","code":"sim_cRCT <- function(k = 10, n = 200, beta_1 = 0.3, sig_w = 0.975, sig_b = 0.224){   k <- floor(k); n <- floor(n)   u_c <- rnorm(k, sd = sig_b)   cluster_size <-  rep(n%/%k, k) + c(rep(1, n%%k), rep(0, k - n%%k))   y_c <- rep(u_c, times = cluster_size) + rnorm(n, 0, sig_w)    u_i <- rnorm(k, sd = sig_b)   y_i <- beta_1 + rep(u_i, times = cluster_size) + rnorm(n, 0, sig_w)    s <- t.test(y_i, y_c, alternative = \"greater\")$p.value > 0.05    return(c(s = s)) }  # For example, sim_cRCT() #>     s  #> FALSE det_cRCT <- function(k = 10, n = 200, beta_1 = 0.3, sig_w = 0.975, sig_b = 0.224){   return(c(k = k, n = n, m = n/k)) } design_space <- design_space(lower = c(10, 100),                               upper = c(100, 500),                              sim = sim_cRCT)  design_space #>   name lower upper #> 1    k    10   100 #> 2    n   100   500 hypotheses <- hypotheses(values = matrix(c(0.3, sqrt(0.95), sqrt(0.05)), ncol = 1),                          hyp_names = c(\"alt\"),                          sim = sim_cRCT)  hypotheses #>              alt #> beta_1 0.3000000 #> sig_w  0.9746794 #> sig_b  0.2236068 constraints <- constraints(name = c(\"con_tII\", \"con_m\"),                    out = c(\"s\", \"m\"),                    hyp = c(\"alt\", \"alt\"),                    nom = c(0.2, 10),                    delta = c(0.95, 1),                    binary = c(TRUE, FALSE))  constraints #>      name out hyp  nom delta binary #> 1 con_tII   s alt  0.2  0.95   TRUE #> 2   con_m   m alt 10.0  1.00  FALSE objectives <- objectives(name = c(\"n\", \"k\"),                  out = c(\"n\", \"k\"),                  hyp = c(\"alt\", \"alt\"),                  weight = c(1, 10),                  binary = c(FALSE, FALSE))  objectives #>   name out hyp weight binary #> 1    n   n alt      1  FALSE #> 2    k   k alt     10  FALSE prob <- BOSSS_problem(sim_cRCT, design_space, hypotheses, objectives, constraints, det_func = det_cRCT)"},{"path":"https://dtwilson.github.io/BOSSS/articles/BOSSS.html","id":"initialisation","dir":"Articles","previous_headings":"Adaptive design","what":"Initialisation","title":"BOSSS","text":"set problem, now need create initial solution . involves setting space-filling set designs spanning design space (size number designs), computing Monte Carlo estimates expectations interested designs (using N samples evaluation), fitting Gaussian Process models estimates, using models estimate Pareto set front:  print() function give table Pareto set associated objective function values. plot() function plot Pareto front.","code":"size <- 20 N <- 500  sol <- BOSSS_solution(size, N, prob) #> Checking simulation speed... #> Initialisation will take approximately 2.756164 secs  #> Solution found  print(sol)  #> Design variables for the Pareto set:  #>  #>         k   n #> 6  66.250 150 #> 8  26.875 225 #> 12 38.125 175 #>  #> Corresponding objective function values...  #>  #>    n, alt (mean) k, alt (mean) #> 6            150        66.250 #> 8            225        26.875 #> 12           175        38.125 #>  #> ...and constraint function values: #>  #>    s, alt (mean) s, alt (var) m, alt (mean) #> 6      -1.732408   0.01564970      2.264151 #> 8      -2.644208   0.03226089      8.372093 #> 12     -1.863526   0.01718935      4.590164 plot(sol)"},{"path":"https://dtwilson.github.io/BOSSS/articles/BOSSS.html","id":"iteration","dir":"Articles","previous_headings":"Adaptive design","what":"Iteration","title":"BOSSS","text":"can now start improving solution calling iterate() function. call uses fitted Gaussian Process models decide next design evaluated, computes Monte Carlo estimates point, updates estimated Pareto set front.","code":"N <- 500 for(i in 1:10) {   sol <- iterate(sol, prob, N)  } print(sol) #> Design variables for the Pareto set:  #>  #>           k        n #> 6  66.25000 150.0000 #> 24 35.39951 157.9180 #> 26 17.17720 171.7621 #> 28 23.37763 163.0784 #>  #> Corresponding objective function values...  #>  #>    n, alt (mean) k, alt (mean) #> 6       150.0000      66.25000 #> 24      157.9180      35.39951 #> 26      171.7621      17.17720 #> 28      163.0784      23.37763 #>  #> ...and constraint function values: #>  #>    s, alt (mean) s, alt (var) m, alt (mean) #> 6      -1.732408   0.01564970      2.264151 #> 24     -1.555727   0.01388802      4.461022 #> 26     -1.671131   0.01500043      9.999422 #> 28     -1.501149   0.01340870      6.975829 plot(sol)"},{"path":"https://dtwilson.github.io/BOSSS/articles/BOSSS.html","id":"diagnostics","dir":"Articles","previous_headings":"Adaptive design","what":"Diagnostics","title":"BOSSS","text":"check GP models giving sensible predictions, can choose specific design plot predictions model along range design variable.   can also get predicted values 95% credible intervals point evaluated, contrasting empirical MC estimate interval. return data frame models, named according output-hypothesis combination defines . highlight * points two intervals overlap. things aren’t looking good, may indicate need points initial evaluations, simulations points. can via extend_initial(). example, suppose want add extra 500 simulations initial points: , add another 10 points: happy solution chosen specific design Pareto set, might want double check point running large number simulations . decide want run simulations point, can pass previous results built upon.","code":"# Pick a specific design from the Pareto set design <- sol$p_set[nrow(sol$p_set),]  diag_plots(design, prob, sol) #> [[1]] #>  #> [[2]] diag_predictions(prob, sol) #> $`Output: s, hypothesis: alt` #>           k        n     MC_mean      MC_l95     MC_u95      p_mean       p_l95 #> 1  55.00000 300.0000 0.032374101 0.028678214 0.03652838 0.033091347 0.025642104 #> 2  77.50000 200.0000 0.120303757 0.116441676 0.12427592 0.092546471 0.078025395 #> 3  32.50000 400.0000 0.030375699 0.026694246 0.03454685 0.029961720 0.021969747 #> 4  43.75000 250.0000 0.046362910 0.042599804 0.05044092 0.050532474 0.040785724 #> 5  88.75000 450.0000 0.004396483 0.001801431 0.01068980 0.006329806 0.003161094 #> 6  66.25000 150.0000 0.150279776 0.146404852 0.15423873 0.183013717 0.167879333 #> 7  21.25000 350.0000 0.064348521 0.060540980 0.06837810 0.054921222 0.042174099 #> 8  26.87500 225.0000 0.066346922 0.062535896 0.07037276 0.078423630 0.064160017 #> 9  71.87500 425.0000 0.012390088 0.009026885 0.01698486 0.009864777 0.006221843 #> 10 94.37500 125.0000 0.224220624 0.220328166 0.22816172 0.222943236 0.189712392 #> 11 49.37500 325.0000 0.036370903 0.032650733 0.04049720 0.032920497 0.025479515 #> 12 38.12500 175.0000 0.134292566 0.130423804 0.13825784 0.143889868 0.129220754 #> 13 83.12500 375.0000 0.010391687 0.007123712 0.01513598 0.013969502 0.008439837 #> 14 60.62500 275.0000 0.028377298 0.024712216 0.03256780 0.035862707 0.027678720 #> 15 15.62500 475.0000 0.026378897 0.022732542 0.03059183 0.025639129 0.015533637 #> 16 18.43750 287.5000 0.062350120 0.058546281 0.06638367 0.060205641 0.046750122 #> 17 63.43750 487.5000 0.004396483 0.001801431 0.01068980 0.007505095 0.003622947 #> 18 85.93750 187.5000 0.098321343 0.094473461 0.10230824 0.112637423 0.093961706 #> 19 40.93750 387.5000 0.020383693 0.016814150 0.02469200 0.026853657 0.020096697 #> 20 52.18750 137.5000 0.194244604 0.190357754 0.19819139 0.212879117 0.194021370 #> 21 16.02877 160.2877 0.220223821 0.216332030 0.22416560 0.199650899 0.178160264 #> 22 17.93091 179.3085 0.158273381 0.154395824 0.16222964 0.155650798 0.139765791 #> 23 51.30692 144.8900 0.204236611 0.200347724 0.20818133 0.198274630 0.184546552 #> 24 35.39951 157.9180 0.174260592 0.170378459 0.17821218 0.181974980 0.168790182 #> 25 55.97804 145.2374 0.214228617 0.210337869 0.21817145 0.195421787 0.182093674 #> 26 17.17720 171.7621 0.158273381 0.154395824 0.16222964 0.172418351 0.156159056 #> 27 55.82865 147.4829 0.184252598 0.180367987 0.18820166 0.190868589 0.177948446 #> 28 23.37763 163.0784 0.182254197 0.178370061 0.18620374 0.183746159 0.169378836 #> 29 42.17415 151.8225 0.206235012 0.202345740 0.21017934 0.189448232 0.176176251 #> 30 66.69676 145.3298 0.208233413 0.204343763 0.21217736 0.192271307 0.177094049 #>         p_u95 no_overlap #> 1  0.04261002            #> 2  0.10944921          * #> 3  0.04073984            #> 4  0.06245679            #> 5  0.01263461            #> 6  0.19918588          * #> 7  0.07123463            #> 8  0.09553452            #> 9  0.01560718            #> 10 0.26012627            #> 11 0.04243989            #> 12 0.15991840            #> 13 0.02303795            #> 14 0.04635116            #> 15 0.04203808            #> 16 0.07722018            #> 17 0.01548250            #> 18 0.13447417            #> 19 0.03579946            #> 20 0.23303978            #> 21 0.22303035            #> 22 0.17297817            #> 23 0.21275748            #> 24 0.19594690            #> 25 0.20947559          * #> 26 0.18998941            #> 27 0.20449346            #> 28 0.19904014            #> 29 0.20347310            #> 30 0.20841985 sol <- extend_initial(prob, sol, extra_N = 500)  # Look at the first threee designs; the empirical and predicted estimates will have changed diag_predictions(prob, sol)[[1]][1:3,] #>      k   n    MC_mean     MC_l95     MC_u95     p_mean      p_l95      p_u95 #> 1 55.0 300 0.03218713 0.03028455 0.03420501 0.03269835 0.02761516 0.03868000 #> 2 77.5 200 0.11215514 0.11021086 0.11412932 0.09341229 0.08294992 0.10504311 #> 3 32.5 400 0.03018792 0.02828915 0.03220992 0.02686743 0.02175458 0.03314123 #>   no_overlap #> 1            #> 2          * #> 3 sol <- extend_initial(prob, sol, extra_points = 10)  # Look at the added designs, which go to the top of the table diag_predictions(prob, sol)[[1]][1:10,] #>          k     n    MC_mean      MC_l95     MC_u95      p_mean       p_l95 #> 21 97.1875 337.5 0.02119152 0.019318445 0.02324191 0.021881172 0.016601510 #> 22 74.6875 237.5 0.06217513 0.060244532 0.06416337 0.063321775 0.056422403 #> 23 29.6875 437.5 0.02319072 0.021310262 0.02523284 0.022298306 0.018245284 #> 24 24.0625 162.5 0.15413834 0.152189330 0.15610772 0.177931107 0.166140500 #> 25 69.0625 362.5 0.01619352 0.014346558 0.01827386 0.017643852 0.014543019 #> 26 91.5625 262.5 0.06117553 0.059245429 0.06316429 0.050233467 0.042388058 #> 27 46.5625 462.5 0.01119552 0.009396651 0.01333413 0.011258177 0.008375788 #> 28 35.3125 212.5 0.10715714 0.105213659 0.10913214 0.095396210 0.086751027 #> 29 80.3125 412.5 0.01219512 0.010383646 0.01431805 0.009723699 0.007360749 #> 30 57.8125 112.5 0.29508197 0.293126575 0.29704492 0.285795374 0.262791195 #>         p_u95 no_overlap #> 21 0.02879073            #> 22 0.07100132            #> 23 0.02722670            #> 24 0.19036744          * #> 25 0.02139149            #> 26 0.05944081            #> 27 0.01511737            #> 28 0.10480406          * #> 29 0.01283540            #> 30 0.30996659 design <- sol$p_set[nrow(sol$p_set),]  r <- diag_check_point(design, prob, sol, N=10^4)  #> Model 1 prediction interval: [0.177, 0.202] #> Model 1 empirical interval: [0.179, 0.194] r <- diag_check_point(design, prob, sol, N=10^4, r)  #> Model 1 prediction interval: [0.177, 0.202] #> Model 1 empirical interval: [0.18, 0.191]"},{"path":"https://dtwilson.github.io/BOSSS/articles/Examples.html","id":"nifty","dir":"Articles","previous_headings":"","what":"NIFTy","title":"Examples","text":"NIFTy trial open people total thyroid surgery aimed find whether using near-infrared fluorescence imaging reduce number people whose parathyroid glands become damaged thyroid surgery. adaptive design interim analysis based (binary) short-term outcome, final analysis based (, binary) long-term outcome. design problem choose sample size decision rule inerim final analysis. analyses used χ2\\chi^2 test, decision rule expressed nominal α\\alpha used stage. simulation function, exactly provided trial statistician except small adjustments arguments return values conform BOSSS standards. can construct BOSSS problem object follows: implies going search space sample sizes decision criteria, looking trial designs simultaneously minimise type error rate (\"TI\"), type II error rate (\"TII\") expected sample size (\"EN\"), subject type error rate (probably) less 0.1 (\"TI_con\") type II error rate (probably) less 0.2 (\"TIIcon\"). Now initialise get initial estimate Pareto front:  Finally, iterate times improve initial approximation:","code":"#n is the total sample size #ninterim is the number of patients at the interim analysis (proportion) #ainterim is alpha at interim analysis (threshold p-value at interim analysis) #afinal is alpha at final analaysis (threshold p-value for 2nd and final analysis) #this means overall alpha for the trial is ainterim*afinal # #pcontshort is the probability of 1 day PoSH in the control arm #pexpshort is the probability of 1 day PoSH in the experimental arm #pcontlong is the probability of 6 month PoSH in the control arm #pexplong is the probability of 6 month PoSH in the experimental arm #p01_relative is s.t. p01_relative*pexplong = probability of having  # a long term outcome after no short term outcome  sim_trial <- function(n = 300, ninterim = 0.5, ainterim = 0.4, afinal = 0.1,                       pcontshort = 0.25, pexpshort = 0.125,                       pcontlong = 0.1, pexplong = 0.03, p01_relative = 0) {   ninterim <- floor(ninterim*n)      patients<-c(1:n) #create patients      treat<- rep(c(1,2), ceiling(n/2))[1:n]      n_cont <- sum(treat == 1)      short<-rep(0,n) #short term outcome   long<-rep(0,n) #long term outcome      data<-data.frame(patients,treat,short,long) #combine into dataset      #generate result 1/0 for short term outcome. If short term outcome=0 then long term outcome=0   #If short term outcome=1 then long term outcome has probability pcontlong/pcontshort   #repeat for treatment=2   # for(i in 1:n){   #   if(treat[i]==1){   #     data$short[i]<-rbinom(1,1,pcontshort)   #     if(data$short[i]==0){   #       data$long[i]<-0   #     }   #     if(data$short[i]==1){   #       data$long[i]<-rbinom(1,1,pcontlong/pcontshort)   #     }   #   }   #   else{   #     data$short[i]<-rbinom(1,1,pexpshort)   #     if(data$short[i]==0){   #       data$long[i]<-0   #     }   #     if(data$short[i]==1){   #       data$long[i]<-rbinom(1,1,pexplong/pexpshort)   #     }   #   }   # }      # An alternative and more general parametersation of the above model   # to allow different values of probability of a long outcome after   # no short outcome (previously hard coded as 0)    # probability vector p00, p01, p10, p11 in (short, long) form   # Control arm:   p01 <- p01_relative*pcontlong   p11 <- pcontlong - p01   p10 <- pcontshort - p11   # Simulate outcomes in multinomial format   cont_count <- rmultinom(1, n_cont, c((1 - p01 - p10 - p11), p01, p10, p11))   # Translate these to short and long outcomes   cont_out <- matrix(c(rep(c(0,0), cont_count[1]),                        rep(c(0,1), cont_count[2]),                        rep(c(1,0), cont_count[3]),                        rep(c(1,1), cont_count[4])), ncol = 2, byrow = TRUE)   # shuffle the list randomly   cont_out <- cont_out[sample(1:nrow(cont_out)),]      # Experimental arm:     # Control arm:   p01 <- p01_relative*pexplong   p11 <- pexplong - p01   p10 <- pexpshort - p11   exp_count <- rmultinom(1, n - n_cont, c((1 - p01 - p10 - p11), p01, p10, p11))   exp_out <- matrix(c(rep(c(0,0), exp_count[1]),                        rep(c(0,1), exp_count[2]),                        rep(c(1,0), exp_count[3]),                        rep(c(1,1), exp_count[4])), ncol = 2, byrow = TRUE)   exp_out <- exp_out[sample(1:nrow(exp_out)),]      data[data$treat == 1, c(\"short\", \"long\")] <- cont_out   data[data$treat == 2, c(\"short\", \"long\")] <- exp_out      #perform chi squared test on short term outcome for 1st ninterim patients   data2<-data[1:ninterim,]   tbl<-table(data2$short,data2$treat)   test<- suppressWarnings(chisq.test(tbl)$p.value) #get p-value      #if p<ainterim, perform chi squared test on long term outcome for all patients   if(test<ainterim){     tbl2<-table(data$long,data$treat)     test2<- suppressWarnings(chisq.test(tbl2)$p.value)   }      #if p>ainterim, trial unsuccessful at interim and final analysis   #if p<ainterim, trial successful at interim:   #if p2>afinal, trial unsuccessful at final analysis   #if p2<afinal, trial successful at final analysis   if(test>=ainterim){     return(c(g = FALSE, s = TRUE, n = ninterim))   }   if(test<ainterim){     if(mean(data2[data2$treat == 1,\"short\"]) < mean(data2[data2$treat == 2,\"short\"])){       return(c(g = FALSE, s = TRUE, n = ninterim))     } else {       if(test2>afinal){         return(c(g = FALSE, s = TRUE, n = n))       }       if(test2<afinal){         return(c(g = TRUE, s = FALSE, n = n))       }     }   } }  # For example, sim_trial() # Problem specification design_space <- design_space(lower = c(300,0.05,0,0),                               upper = c(700,0.5,1,1),                              sim = sim_trial)  hypotheses <- hypotheses(values = matrix(c(0.25, 0.25, 0.1, 0.1, 0,                                             0.25, 0.125, 0.1, 0.03, 0), ncol = 2),                          hyp_names = c(\"null\", \"alt\"),                          sim = sim_trial)  constraints <- constraints(name = c(\"TI_con\", \"TII_con\"),                    out = c(\"g\", \"s\"),                    hyp = c(\"null\", \"alt\"),                    nom = c(0.1, 0.2),                    delta =c(0.95, 0.95),                    binary = c(TRUE, TRUE))  objectives <- objectives(name = c(\"TI\", \"TII\", \"EN\"),                  out = c(\"g\", \"s\", \"n\"),                  hyp = c(\"null\", \"alt\", \"null\"),                  weight = c(100, 100, 1),                  binary = c(TRUE, TRUE, FALSE))  prob <- BOSSS_problem(sim_trial, design_space, hypotheses, objectives, constraints) # Initialisation size <- 40 N <- 500 sol <- BOSSS_solution(size, N, prob) print(sol)  #> Design variables for the Pareto set:  #>  #>         n  ninterim ainterim   afinal #> 2  600.00 0.1625000 0.750000 0.250000 #> 9  575.00 0.4156250 0.812500 0.187500 #> 13 625.00 0.3593750 0.437500 0.062500 #> 15 325.00 0.4718750 0.687500 0.312500 #> 22 587.50 0.2046875 0.718750 0.031250 #> 27 462.50 0.4578125 0.781250 0.093750 #> 35 418.75 0.2820313 0.859375 0.328125 #> 37 668.75 0.3382812 0.734375 0.203125 #> 39 368.75 0.4507813 0.484375 0.453125 #>  #> Corresponding objective function values...  #>  #>    g, null (mean) g, null (var) s, alt (mean) s, alt (var) n, null (mean) #> 2       -3.023783    0.04519900     -1.764057   0.01600202       227.7800 #> 9       -3.221373    0.05416146     -3.335521   0.06020906       356.6240 #> 13      -4.378391    0.16331377     -2.359280   0.02533537       304.2000 #> 15      -2.384886    0.02587913     -1.846444   0.01697650       203.9120 #> 22      -4.226834    0.14091644     -1.474557   0.01318541       280.8200 #> 27      -3.689289    0.08401554     -2.047467   0.01973883       295.0010 #> 35      -2.285558    0.02384669     -2.359280   0.02533537       232.2850 #> 37      -3.118117    0.04925661     -2.856301   0.03887797       366.7945 #> 39      -2.493162    0.02834157     -1.812902   0.01656951       201.6840 #>    n, null (var) #> 2       97.55297 #> 9       51.91310 #> 13      51.55944 #> 15      12.35437 #> 22      98.83823 #> 27      28.19656 #> 35      42.70572 #> 37      85.19774 #> 39      11.94706 #>  #> ...and constraint function values: #>  #>    g, null (mean) g, null (var) s, alt (mean) s, alt (var) #> 2       -3.023783    0.04519900     -1.764057   0.01600202 #> 9       -3.221373    0.05416146     -3.335521   0.06020906 #> 13      -4.378391    0.16331377     -2.359280   0.02533537 #> 15      -2.384886    0.02587913     -1.846444   0.01697650 #> 22      -4.226834    0.14091644     -1.474557   0.01318541 #> 27      -3.689289    0.08401554     -2.047467   0.01973883 #> 35      -2.285558    0.02384669     -2.359280   0.02533537 #> 37      -3.118117    0.04925661     -2.856301   0.03887797 #> 39      -2.493162    0.02834157     -1.812902   0.01656951 plot(sol) # Iterations N <- 500 for(i in 1:20) {   sol <- iterate(sol, prob, N)  } print(sol) #> Design variables for the Pareto set:  #>  #>           n  ninterim  ainterim     afinal #> 2  600.0000 0.1625000 0.7500000 0.25000000 #> 9  575.0000 0.4156250 0.8125000 0.18750000 #> 13 625.0000 0.3593750 0.4375000 0.06250000 #> 15 325.0000 0.4718750 0.6875000 0.31250000 #> 35 418.7500 0.2820313 0.8593750 0.32812500 #> 39 368.7500 0.4507813 0.4843750 0.45312500 #> 42 696.7668 0.4555916 0.3326731 0.01782676 #> 45 516.4745 0.4302293 0.3941854 0.16301852 #> 47 625.2480 0.4039887 0.4004877 0.18772294 #> 48 439.6051 0.3664093 0.8074256 0.28307692 #> 49 621.8103 0.4986784 0.3374450 0.11741606 #> 50 632.9055 0.4936170 0.5787490 0.35234491 #> 51 447.1385 0.2720656 0.6455986 0.16845326 #> 52 611.8022 0.4952288 0.4885986 0.22588945 #> 53 620.8031 0.4818502 0.1746389 0.04170175 #> 54 340.3914 0.3331821 0.7793364 0.31243737 #> 55 490.6632 0.4617599 0.6692496 0.36081964 #> 56 526.4137 0.3409052 0.4083777 0.08441566 #> 60 636.9130 0.4997090 0.2507842 0.07803600 #>  #> Corresponding objective function values...  #>  #>    g, null (mean) g, null (var) s, alt (mean) s, alt (var) n, null (mean) #> 2       -3.023783    0.04519900     -1.764057   0.01600202       227.7800 #> 9       -3.221373    0.05416146     -3.335521   0.06020906       356.6240 #> 13      -4.378391    0.16331377     -2.359280   0.02533537       304.2000 #> 15      -2.384886    0.02587913     -1.846444   0.01697650       203.9120 #> 35      -2.285558    0.02384669     -2.359280   0.02533537       232.2850 #> 39      -2.493162    0.02834157     -1.812902   0.01656951       201.6840 #> 42      -6.030685    0.83533640     -2.047467   0.01973883       364.0911 #> 45      -4.094751    0.12398289     -2.150157   0.02138823       265.5822 #> 47      -3.533378    0.07247929     -2.493162   0.02834157       318.4381 #> 48      -2.551256    0.02977855     -2.411048   0.02644954       252.9397 #> 49      -4.556303    0.19432705     -2.895870   0.04027675       344.2991 #> 50      -2.856301    0.03887797     -3.872426   0.10007918       374.8975 #> 51      -3.397487    0.06379365     -1.671131   0.01500043       211.0142 #> 52      -3.118117    0.04925661     -3.335521   0.06020906       366.4389 #> 53      -5.422544    0.45655261     -1.952320   0.01835923       320.8826 #> 54      -2.551256    0.02977855     -1.597971   0.01427917       181.6722 #> 55      -2.437794    0.02704859     -3.118117   0.04925661       299.5764 #> 56      -5.045842    0.31451121     -1.612318   0.01441616       227.6379 #> 60      -3.872426    0.10007918     -2.285558   0.02384669       362.0100 #>    n, null (var) #> 2       97.55297 #> 9       51.91310 #> 13      51.55944 #> 15      12.35437 #> 35      42.70572 #> 39      11.94706 #> 42      31.39490 #> 45      21.91272 #> 47      40.84945 #> 48      34.39271 #> 49      19.07493 #> 50      32.52114 #> 51      42.59428 #> 52      31.68524 #> 53      13.15239 #> 54      21.84288 #> 55      28.17529 #> 56      29.12191 #> 60      24.24545 #>  #> ...and constraint function values: #>  #>    g, null (mean) g, null (var) s, alt (mean) s, alt (var) #> 2       -3.023783    0.04519900     -1.764057   0.01600202 #> 9       -3.221373    0.05416146     -3.335521   0.06020906 #> 13      -4.378391    0.16331377     -2.359280   0.02533537 #> 15      -2.384886    0.02587913     -1.846444   0.01697650 #> 35      -2.285558    0.02384669     -2.359280   0.02533537 #> 39      -2.493162    0.02834157     -1.812902   0.01656951 #> 42      -6.030685    0.83533640     -2.047467   0.01973883 #> 45      -4.094751    0.12398289     -2.150157   0.02138823 #> 47      -3.533378    0.07247929     -2.493162   0.02834157 #> 48      -2.551256    0.02977855     -2.411048   0.02644954 #> 49      -4.556303    0.19432705     -2.895870   0.04027675 #> 50      -2.856301    0.03887797     -3.872426   0.10007918 #> 51      -3.397487    0.06379365     -1.671131   0.01500043 #> 52      -3.118117    0.04925661     -3.335521   0.06020906 #> 53      -5.422544    0.45655261     -1.952320   0.01835923 #> 54      -2.551256    0.02977855     -1.597971   0.01427917 #> 55      -2.437794    0.02704859     -3.118117   0.04925661 #> 56      -5.045842    0.31451121     -1.612318   0.01441616 #> 60      -3.872426    0.10007918     -2.285558   0.02384669 plot(sol)"},{"path":"https://dtwilson.github.io/BOSSS/articles/Examples.html","id":"pressure-2","dir":"Articles","previous_headings":"","what":"PRESSURE 2","title":"Examples","text":"PRESSURE 2 trial comparing different mattresses terms ability prevent development pressure ulcers, longitudinal data collected patient. Smith et al. (2021) suggested one way analyse data multi-state model, showed simulation used estimate power analysis. Herw extend approach searching optimal design. simulation deterministic functions : now construct problem encode want search total number patients, total number assessments assessment frequency. looking designs minimise numbers pattens assessments, whilst constraining type II error rate (probably) less 0.2 follow-length less 200.","code":"sim_P2 <- function(n = 500, fu = 60, af = 1,                     q12 = 0.05, q23 = 0.05, q34 = 0.03,                    b12 = 0.67, b23 = 0.67, b34 = 0.67){      # n: total number of patients   # fu: follow-up length (days)   # af: assemment frequency (days)   # q12, q23, q34: transition probabilities   # b12, b23, b34: treatment effects      # Calculate length of follow up   na <- n*floor(fu/af)      # Assessment times   as_times <- floor(seq(af, fu, af))      # Simulate numbers starting in each state   starts <- rep(1:3, times = rmultinom(1, n, c(0.15, 0.7, 0.15)))   # Randomly allocate treatment   trt <- rbinom(n, 1, 0.5)      # Simulate transitions into each remaining state   enter2 <- (starts == 1)*rexp(n, q12*exp(log(b12)*trt))   enter3 <- (starts != 3)*(enter2 + rexp(n, q23*exp(log(b23)*trt)))   enter4 <- (starts != 3)*enter3 + rexp(n, q34*exp(log(b34)*trt))      # Matrix of transition times into each state for each patient   enter_m <- matrix(c(enter2, enter3, enter4), ncol = 3)      # Add time of \"transitioning\" to the end of the follow-up period   enter_m <- cbind(enter_m, pmax(enter_m[,3], fu))   # Cap all times at length of follow-up   enter_m <- pmin(enter_m, fu)      # Ceiling all times, assuming assessment is at the start of the day    # and so any transitions after x.0 will be seen at (x+1).0   enter_m <- ceiling(enter_m)      # Translate into number of days spent in each state   times_m <- cbind(enter_m[,1],                     enter_m[,2] - enter_m[,1],                     enter_m[,3] - enter_m[,2],                    enter_m[,4] - enter_m[,3])    y <- t(apply(times_m, 1, function(x) rep(1:4, times = x)))      # Reshape to long   y <- melt(y)   colnames(y) <- c(\"id\", \"time\", \"state\")   y$trt <- trt[y$id]      # Keep observations on assessment times and order by patient   y <- y[y$time %in% as_times,]   y <- y[order(y$id),]      Q <- rbind ( c(0, 0.1, 0, 0),                 c(0, 0, 0.1, 0),                 c(0, 0, 0, 0.1),                 c(0, 0, 0, 0) )    # If msm returns an error we take this as a non-significant result   suppressWarnings(fit <- try({     msm(state ~ time, subject=id, data = y, qmatrix = Q,              covariates = ~ trt)   }, silent = TRUE))      if (class(fit) == \"try-error\") {     sig <- 0   } else {     # If not converged, will not return CIs     r1.67 <- hazard.msm(fit, cl = 1 - 0.0167)$trt     if(ncol(r1.67) != 3){       sig <- 0     } else {       sig1.67 <- sum(!(r1.67[,2] < 1 & r1.67[,3] > 1)) >= 3              r2.5 <- hazard.msm(fit, cl = 1 - 0.025)$trt       sig2.5 <- sum(!(r2.5[,2] < 1 & r2.5[,3] > 1)) >= 2              r5 <- hazard.msm(fit, cl = 1 - 0.05)$trt       sig5 <- sum(!(r5[,2] < 1 & r5[,3] > 1)) >= 1              sig <- any(c(sig1.67, sig2.5, sig5))     }   }   return(c(s = !sig)) }  det_P2 <- function(n = 500, fu = 60, af = 1,                     q12 = 0.05, q23 = 0.05, q34 = 0.03,                    b12 = 0.67, b23 = 0.67, b34 = 0.67){      na <- n*floor(fu/af)      return(c(n = n, a = na, f = fu)) }  sim_P2() design_space <- design_space(lower = c(50, 10, 1),                               upper = c(500, 60, 10),                              sim = sim_P2)  hypotheses <- hypotheses(values = matrix(c(0.05, 0.05, 0.03, 0.67, 0.67, 0.67), ncol = 1),                          hyp_names = c(\"alt\"),                          sim = sim_P2)  constraints <- constraints(name = c(\"a\"),                    out = c(\"s\"),                    hyp = c(\"alt\"),                    nom = c(0.2),                    delta =c(0.95),                    binary = c(TRUE))  objectives <- objectives(name = c(\"n\", \"a\", \"f\"),                  out = c(\"n\", \"a\", \"f\"),                  hyp = c(\"alt\", \"alt\", \"alt\"),                  weight = c(10, 1, 10),                  binary = c(FALSE, FALSE, FALSE))  prob <- BOSSS_problem(sim_P2, design_space, hypotheses, objectives, constraints, det_func = det_P2) size <- 30 N <- 500  sol <- BOSSS_solution(size, N, prob) print(sol)  #> Design variables for the Pareto set:  #>  #>           n      fu      af #> 9  359.3750 50.6250 8.31250 #> 11 246.8750 38.1250 1.56250 #> 13 415.6250 44.3750 4.93750 #> 17 317.1875 58.4375 4.09375 #> 18 429.6875 20.9375 1.84375 #> 21 485.9375 39.6875 9.71875 #> 26 457.8125 30.3125 3.53125 #> 29 401.5625 49.0625 6.90625 #>  #> Corresponding objective function values...  #>  #>    n, alt (mean) a, alt (mean) f, alt (mean) #> 9       359.3750      2156.250       50.6250 #> 11      246.8750      5925.000       38.1250 #> 13      415.6250      3325.000       44.3750 #> 17      317.1875      4440.625       58.4375 #> 18      429.6875      4726.562       20.9375 #> 21      485.9375      1943.750       39.6875 #> 26      457.8125      3662.500       30.3125 #> 29      401.5625      2810.938       49.0625 #>  #> ...and constraint function values: #>  #>    s, alt (mean) s, alt (var) #> 9      -2.818081   0.03757873 #> 11     -1.780150   0.01618577 #> 13     -2.936892   0.04178691 #> 17     -3.221373   0.05416146 #> 18     -1.732408   0.01564970 #> 21     -2.710611   0.03418256 #> 26     -2.437794   0.02704859 #> 29     -3.221373   0.05416146 plot(sol) N <- 500 for(i in 1:20) {   sol <- iterate(sol, prob, N)  } print(sol) #> Design variables for the Pareto set:  #>  #>           n       fu       af #> 9  359.3750 50.62500 8.312500 #> 11 246.8750 38.12500 1.562500 #> 14 303.1250 31.87500 2.687500 #> 18 429.6875 20.93750 1.843750 #> 34 230.0819 53.88707 6.759177 #> 38 199.7083 52.63788 3.515716 #> 39 368.6289 27.57863 3.947984 #> 42 476.0093 19.61557 2.193718 #> 43 233.1484 44.00125 4.014669 #> 46 466.5642 19.70490 1.971585 #> 47 426.7519 38.53797 9.637794 #> 49 464.0631 17.94535 1.257592 #>  #> Corresponding objective function values...  #>  #>    n, alt (mean) a, alt (mean) f, alt (mean) #> 9       359.3750      2156.250      50.62500 #> 11      246.8750      5925.000      38.12500 #> 14      303.1250      3334.375      31.87500 #> 18      429.6875      4726.562      20.93750 #> 34      230.0819      1610.573      53.88707 #> 38      199.7083      2795.917      52.63788 #> 39      368.6289      2211.773      27.57863 #> 42      476.0093      3808.074      19.61557 #> 43      233.1484      2331.484      44.00125 #> 46      466.5642      4199.077      19.70490 #> 47      426.7519      1280.256      38.53797 #> 49      464.0631      6496.883      17.94535 #>  #> ...and constraint function values: #>  #>    s, alt (mean) s, alt (var) #> 9      -2.818081   0.03757873 #> 11     -1.780150   0.01618577 #> 14     -1.448401   0.01297212 #> 18     -1.732408   0.01564970 #> 34     -1.732408   0.01564970 #> 38     -1.397322   0.01257317 #> 39     -1.435480   0.01286903 #> 42     -1.569679   0.01401522 #> 43     -1.597971   0.01427917 #> 46     -1.612318   0.01441616 #> 47     -1.474557   0.01318541 #> 49     -1.656207   0.01484864 plot(sol)"},{"path":"https://dtwilson.github.io/BOSSS/articles/Examples.html","id":"references","dir":"Articles","previous_headings":"","what":"References","title":"Examples","text":"Croft J, Ainsworth G, Corrigan N, et al. NIFTy: near-infrared fluorescence (NIRF) imaging prevent postsurgical hypoparathyroidism (PoSH) thyroid surgery—phase II/III pragmatic, multicentre randomised controlled trial protocol patients undergoing total completion thyroidectomy. BMJ Open, 15:e092422 (2025). https://doi.org/10.1136/bmjopen-2024-092422 Nixon, Jane et al. Pressure Relieving Support Surfaces Pressure Ulcer Prevention (PRESSURE 2): Clinical Health Economic Results Randomised Controlled Trial. eClinicalMedicine, Volume 14, 42 - 52 (2019) Smith IL, Nixon JE, Sharples L. Power sample size multistate model analysis longitudinal discrete outcomes disease prevention trials. Statistics Medicine, 40: 1960–1971 (2021). https://doi.org/10.1002/sim.8882","code":"knitr::knit_exit()"},{"path":"https://dtwilson.github.io/BOSSS/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Duncan Wilson. Author, maintainer.","code":""},{"path":"https://dtwilson.github.io/BOSSS/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Wilson D (2025). BOSSS: Bayesian Optimisation Simulation-based Sample Size. R package version 0.0.0.9000, https://dtwilson.github.io/BOSSS/.","code":"@Manual{,   title = {BOSSS: Bayesian Optimisation for Simulation-based Sample Size},   author = {Duncan Wilson},   year = {2025},   note = {R package version 0.0.0.9000},   url = {https://dtwilson.github.io/BOSSS/}, }"},{"path":"https://dtwilson.github.io/BOSSS/index.html","id":"bosss-","dir":"","previous_headings":"","what":"Bayesian Optimisation for Simulation-based Sample Size","title":"Bayesian Optimisation for Simulation-based Sample Size","text":"goal BOSSS help people use Bayesain optimisation solve sample size determination problems simulation required calculate operating characteristics.","code":""},{"path":"https://dtwilson.github.io/BOSSS/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"Bayesian Optimisation for Simulation-based Sample Size","text":"can install development version BOSSS GitHub :","code":"# install.packages(\"devtools\") devtools::install_github(\"DTWilson/BOSSS\")"},{"path":"https://dtwilson.github.io/BOSSS/index.html","id":"example","dir":"","previous_headings":"","what":"Example","title":"Bayesian Optimisation for Simulation-based Sample Size","text":"Suppose want design cluster randomised RCT compare means two groups via t test. Specifically, want find smallest trial power 90%, power must estimated numerically using simulation. solve problem using BOSSS start writing two functions: first function simulation, returning binary output indicating t test failed return significant result. second function deterministic, returning per-arm sample size per-arm number clusters. conventions functions must adhere : argument lists two functions must identical; ii Arguments start design variables, followed model parameters; iii Design variables must continuous; iv Outputs must named vectors; v simulation function mandatory, determinsitc function optional. example, design variables total per-arm sample size n number clusters arm, k. put ranges define design space: decided search space trial designs total per-arm sample size 10 500, per-arm number clusters 3 50. Note extracting names design variables simulation function. Alternatively, can specify manually using names argument. model parameters mean difference mu, -cluster variance var_u, within-cluster variance var_e. choose parameter values simulating call sets hypotheses: estimate power simulate single alternative hypothesis. want impose nominal level ; particular, want type II error rate less 0.1. specify constraint: constraint must tied hypothesis output. case, output s, defined simulation function binary event indicating trial failed return statistically significant result. delta part constraint tolerance allow ; case, consider constraint satisfied least 0.95 chance type II error rate less 0.1. Finally, formalise objectives want minimise: constraints, objectives defined respect output hypothesis. case, wish minimise total sample size number clusters, outputs deterministic function. Although BOSSS uses non-scalarising approach solving multi-objective problems, nevertheless require relative weighting use internal optimisation process. , specify minimising number clusters around 10 times valuable minimising number participant. Together, ingredients problem object: problem specified, generate solution evaluating first set 20 possible designs, evenly spread design space, using N simulations time. Printing result show us estimated Pareto set (, set non-dominated designs): improve solution can iterate many times like, iteration try select design give us biggest improvement evaluate . can also visualise solution plotting Pareto front (, objective values solutions Pareto set):  finished iterating, can select specific design estimated Pareto set. may wish double check operating characteristics design using large number simulations. can via BOSSS, print empirical 95% confidence interval corresponding interval given Gaussian Process surrogate model diagnostic.","code":"library(BOSSS)  sim_trial <- function(n=200, k=10, mu=0.3, var_u=0.05, var_e=0.95){    # Number of patients in each cluster   m <- n/k      # SD of cluster means   s_c <- sqrt(var_u + var_e/m)      # Simulate cluster means   x0 <- stats::rnorm(k, 0, s_c); x1 <- stats::rnorm(k, mu, s_c)      return(c(s = stats::t.test(x0, x1)$p.value >= 0.05)) }  det_func <- function(n=200, k=10, mu=0.3, var_u=0.05, var_e=0.95){   return(c(n=n, k=k)) } design_space <- design_space(lower = c(10, 3),                              upper = c(500, 50),                              sim = sim_trial) hypotheses <- hypotheses(values = matrix(c(0.3, 0.05, 0.95), ncol = 1),                          hyp_names = c(\"alt\"),                          sim = sim_trial) constraints <- constraints(name = c(\"tII\"),                    out = c(\"s\"),                    hyp = c(\"alt\"),                    nom = c(0.1),                    delta = c(0.95),                    binary = c(TRUE)) objectives <- objectives(name = c(\"f1\", \"f2\"),                  out = c(\"n\", \"k\"),                  hyp = c(\"alt\", \"alt\"),                  weight = c(10, 1),                  binary = c(FALSE, FALSE)) problem <- BOSSS_problem(sim_trial, design_space, hypotheses, objectives, constraints, det_func = det_func) size <- 20 N <- 500  solution <- BOSSS_solution(size, N, problem) #> Checking simulation speed... #> Initialisation will take approximately 1.365187 secs  #> Solution found print(solution) #> Design variables for the Pareto set:  #>  #>          n       k #> 9  346.875 41.1875 #> 13 408.125 35.3125 #>  #> Corresponding objective function values...  #>  #>    n, alt (mean) k, alt (mean) #> 9        346.875       41.1875 #> 13       408.125       35.3125 #>  #> ...and constraint function values: #>  #>    s, alt (mean) s, alt (var) #> 9      -2.493162   0.02834157 #> 13     -2.895870   0.04027675 for(i in 1:10){   solution <- iterate(solution, problem, N) }  print(solution) #> Design variables for the Pareto set:  #>  #>           n        k #> 9  346.8750 41.18750 #> 22 453.4098 29.56320 #> 23 499.9935 26.08903 #> 28 331.7451 43.80545 #> 29 387.7225 33.26920 #>  #> Corresponding objective function values...  #>  #>    n, alt (mean) k, alt (mean) #> 9       346.8750      41.18750 #> 22      453.4098      29.56320 #> 23      499.9935      26.08903 #> 28      331.7451      43.80545 #> 29      387.7225      33.26920 #>  #> ...and constraint function values: #>  #>    s, alt (mean) s, alt (var) #> 9      -2.493162   0.02834157 #> 22     -2.644208   0.03226089 #> 23     -2.465155   0.02767846 #> 28     -2.309640   0.02432073 #> 29     -2.261940   0.02339297 plot(solution) design <- solution$p_set[1,]  r <- diag_check_point(design, problem, solution, N=10^5) #> Model 1 prediction interval: [0.074, 0.095] #> Model 1 empirical interval: [0.084, 0.087]"},{"path":"https://dtwilson.github.io/BOSSS/reference/BOSSS_problem.html","id":null,"dir":"Reference","previous_headings":"","what":"Create a BOSSS problem — BOSSS_problem","title":"Create a BOSSS problem — BOSSS_problem","text":"Create BOSSS problem","code":""},{"path":"https://dtwilson.github.io/BOSSS/reference/BOSSS_problem.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create a BOSSS problem — BOSSS_problem","text":"","code":"BOSSS_problem(   sim_trial,   design_space,   hypotheses,   objectives,   constraints = NULL,   det_func = NULL )"},{"path":"https://dtwilson.github.io/BOSSS/reference/BOSSS_problem.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create a BOSSS problem — BOSSS_problem","text":"sim_trial function generates single (possibly multivariate) Monte Carlo outcome design hypothesis. design_space data frame constructed via design_space(). hypotheses data frame constructed via hypotheses(). objectives data frame constructed via objectives(). constraints optional ata frame constructed via constraints(). det_func optional function generates deterministic outcomes design hypothesis.","code":""},{"path":"https://dtwilson.github.io/BOSSS/reference/BOSSS_problem.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create a BOSSS problem — BOSSS_problem","text":"object class BOSSS_problem.","code":""},{"path":"https://dtwilson.github.io/BOSSS/reference/BOSSS_solution.html","id":null,"dir":"Reference","previous_headings":"","what":"Create an initial solution to a BOSSS problem — BOSSS_solution","title":"Create an initial solution to a BOSSS problem — BOSSS_solution","text":"Create initial solution BOSSS problem","code":""},{"path":"https://dtwilson.github.io/BOSSS/reference/BOSSS_solution.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create an initial solution to a BOSSS problem — BOSSS_solution","text":"","code":"BOSSS_solution(size, N, problem)"},{"path":"https://dtwilson.github.io/BOSSS/reference/BOSSS_solution.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create an initial solution to a BOSSS problem — BOSSS_solution","text":"size Number points used initialisation. N Number simulations used MC estimation. problem BOSSS problem solved.","code":""},{"path":"https://dtwilson.github.io/BOSSS/reference/BOSSS_solution.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create an initial solution to a BOSSS problem — BOSSS_solution","text":"object class BOSSS_solution.","code":""},{"path":"https://dtwilson.github.io/BOSSS/reference/constraints.html","id":null,"dir":"Reference","previous_headings":"","what":"Create a set of constraints — constraints","title":"Create a set of constraints — constraints","text":"Create set constraints","code":""},{"path":"https://dtwilson.github.io/BOSSS/reference/constraints.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create a set of constraints — constraints","text":"","code":"constraints(name, out, hyp, nom, delta, binary)"},{"path":"https://dtwilson.github.io/BOSSS/reference/constraints.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create a set of constraints — constraints","text":"name character vector constraint names. character vector denoting simulation output constraint pertains . hyp character vector denoting hypothesis constraint pertains . nom numeric vector nominal upper limits. delta numeric vector probabilities. binary boolean vector denoting constraint output binary otherwise.","code":""},{"path":"https://dtwilson.github.io/BOSSS/reference/constraints.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create a set of constraints — constraints","text":"data.frame defining constraints.","code":""},{"path":"https://dtwilson.github.io/BOSSS/reference/constraints.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create a set of constraints — constraints","text":"","code":"constraints(name = c(\"tII\"),             out = c(\"s\"),             hyp = c(\"alt\"),             nom = c(0.1),             delta = c(0.95),             binary = c(TRUE)) #>   name out hyp nom delta binary #> 1  tII   s alt 0.1  0.95   TRUE"},{"path":"https://dtwilson.github.io/BOSSS/reference/design_space.html","id":null,"dir":"Reference","previous_headings":"","what":"Create a design space — design_space","title":"Create a design space — design_space","text":"Create design space","code":""},{"path":"https://dtwilson.github.io/BOSSS/reference/design_space.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create a design space — design_space","text":"","code":"design_space(name = NULL, sim = NULL, lower, upper)"},{"path":"https://dtwilson.github.io/BOSSS/reference/design_space.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create a design space — design_space","text":"name optional character vector design variable names. sim optional simulation function. lower numeric vector lower limits. upper numeric vector upper limits.","code":""},{"path":"https://dtwilson.github.io/BOSSS/reference/design_space.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create a design space — design_space","text":"data.frame defining design space.","code":""},{"path":"https://dtwilson.github.io/BOSSS/reference/design_space.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create a design space — design_space","text":"","code":"design_space(lower = c(10, 3),              upper = c(500, 50),              name = c(\"n\", \"k\")) #>   name lower upper #> 1    n    10   500 #> 2    k     3    50"},{"path":"https://dtwilson.github.io/BOSSS/reference/diag_check_point.html","id":null,"dir":"Reference","previous_headings":"","what":"Empirical check — diag_check_point","title":"Empirical check — diag_check_point","text":"Empirical check","code":""},{"path":"https://dtwilson.github.io/BOSSS/reference/diag_check_point.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Empirical check — diag_check_point","text":"","code":"diag_check_point(design, problem, solution, N, current = NULL)"},{"path":"https://dtwilson.github.io/BOSSS/reference/diag_check_point.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Empirical check — diag_check_point","text":"design Design evaluate. problem BOSSS problem. solution BOSSS solution. N Number simulations use computing Monte Carlo estimates. current optional matrix containing results previous check_point calls, built upon.","code":""},{"path":"https://dtwilson.github.io/BOSSS/reference/diag_check_point.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Empirical check — diag_check_point","text":"matrix row corresponds model BOSSS solution object, giving Monte Carlo estimates mean variance along side number simulations used compute .","code":""},{"path":"https://dtwilson.github.io/BOSSS/reference/diag_plots.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot one-dimensional model fits — diag_plots","title":"Plot one-dimensional model fits — diag_plots","text":"Plot one-dimensional model fits","code":""},{"path":"https://dtwilson.github.io/BOSSS/reference/diag_plots.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot one-dimensional model fits — diag_plots","text":"","code":"diag_plots(design, problem, solution, type = \"response\")"},{"path":"https://dtwilson.github.io/BOSSS/reference/diag_plots.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot one-dimensional model fits — diag_plots","text":"design Design centre plots . problem BOSSS problem. solution BOSSS solution. type type prediction required binary outcomes. default scale response variable (\"response\"); scale linear predictor (\"link\") can used instead.","code":""},{"path":"https://dtwilson.github.io/BOSSS/reference/diag_plots.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot one-dimensional model fits — diag_plots","text":"list plots size (# models) x (# design variables).","code":""},{"path":"https://dtwilson.github.io/BOSSS/reference/diag_predictions.html","id":null,"dir":"Reference","previous_headings":"","what":"Examine model predictions — diag_predictions","title":"Examine model predictions — diag_predictions","text":"Examine model predictions","code":""},{"path":"https://dtwilson.github.io/BOSSS/reference/diag_predictions.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Examine model predictions — diag_predictions","text":"","code":"diag_predictions(problem, solution, type = \"response\")"},{"path":"https://dtwilson.github.io/BOSSS/reference/diag_predictions.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Examine model predictions — diag_predictions","text":"problem BOSSS problem. solution BOSSS solution. type type prediction required binary outcomes. default scale response variable (\"response\"); scale linear predictor (\"link\") can used instead.","code":""},{"path":"https://dtwilson.github.io/BOSSS/reference/diag_predictions.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Examine model predictions — diag_predictions","text":"list dataframes, one model, giving empirical (Monte Carlo) point interval estimates alongside predicted point interval estimates, flagging agree.","code":""},{"path":"https://dtwilson.github.io/BOSSS/reference/extend_initial.html","id":null,"dir":"Reference","previous_headings":"","what":"Extend the initial set of design evaluations — extend_initial","title":"Extend the initial set of design evaluations — extend_initial","text":"Extend initial set design evaluations","code":""},{"path":"https://dtwilson.github.io/BOSSS/reference/extend_initial.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Extend the initial set of design evaluations — extend_initial","text":"","code":"extend_initial(problem, solution, extra_N = 0, extra_points = 0)"},{"path":"https://dtwilson.github.io/BOSSS/reference/extend_initial.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Extend the initial set of design evaluations — extend_initial","text":"problem BOSSS problem. solution current BOSSS solution. extra_N number extra simulations run exisiting designs. extra_points number new design points add.","code":""},{"path":"https://dtwilson.github.io/BOSSS/reference/extend_initial.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Extend the initial set of design evaluations — extend_initial","text":"updated BOSSS solution object","code":""},{"path":"https://dtwilson.github.io/BOSSS/reference/hypotheses.html","id":null,"dir":"Reference","previous_headings":"","what":"Create a set of hypotheses — hypotheses","title":"Create a set of hypotheses — hypotheses","text":"Create set hypotheses","code":""},{"path":"https://dtwilson.github.io/BOSSS/reference/hypotheses.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create a set of hypotheses — hypotheses","text":"","code":"hypotheses(par_name = NULL, sim = NULL, values, hyp_names)"},{"path":"https://dtwilson.github.io/BOSSS/reference/hypotheses.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create a set of hypotheses — hypotheses","text":"par_name optional character vector model parameter names. sim optional simulation function. values numeric matrix, column giving model parameter values specific hypothesis. hyp_names character vector hypothesis names.","code":""},{"path":"https://dtwilson.github.io/BOSSS/reference/hypotheses.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create a set of hypotheses — hypotheses","text":"data.frame defining hypotheses.","code":""},{"path":"https://dtwilson.github.io/BOSSS/reference/hypotheses.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create a set of hypotheses — hypotheses","text":"","code":"hypotheses(values = matrix(c(0.3, 0.05, 0.95), ncol = 1),            hyp_names = c(\"alt\"),            par_name = c(\"mu\", \"var_u\", \"var_e\")) #>        alt #> mu    0.30 #> var_u 0.05 #> var_e 0.95"},{"path":"https://dtwilson.github.io/BOSSS/reference/iterate.html","id":null,"dir":"Reference","previous_headings":"","what":"Perform one iteration of Bayesian optimisation — iterate","title":"Perform one iteration of Bayesian optimisation — iterate","text":"Perform one iteration Bayesian optimisation","code":""},{"path":"https://dtwilson.github.io/BOSSS/reference/iterate.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Perform one iteration of Bayesian optimisation — iterate","text":"","code":"iterate(solution, problem, N, design = NULL)"},{"path":"https://dtwilson.github.io/BOSSS/reference/iterate.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Perform one iteration of Bayesian optimisation — iterate","text":"solution current BOSSS solution. problem BOSSS problem. N number simulations use computing Monte Carlo estimates. design optional vector design space evaluated. left NULL, optimal design sought.","code":""},{"path":"https://dtwilson.github.io/BOSSS/reference/iterate.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Perform one iteration of Bayesian optimisation — iterate","text":"updated BOSSS solution object.","code":""},{"path":"https://dtwilson.github.io/BOSSS/reference/objectives.html","id":null,"dir":"Reference","previous_headings":"","what":"Create a set of objectives — objectives","title":"Create a set of objectives — objectives","text":"Create set objectives","code":""},{"path":"https://dtwilson.github.io/BOSSS/reference/objectives.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create a set of objectives — objectives","text":"","code":"objectives(name, out, hyp, weight, binary = NULL)"},{"path":"https://dtwilson.github.io/BOSSS/reference/objectives.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create a set of objectives — objectives","text":"name character vector objective names. character vector denoting simulation output objective pertains . hyp character vector denoting hypothesis objective pertains . weight numeric vector weights assigned objective. binary optional boolean vector denoting output objective function binary (TRUE) continuous (FALSE).","code":""},{"path":"https://dtwilson.github.io/BOSSS/reference/objectives.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create a set of objectives — objectives","text":"data.frame defining objectives.","code":""},{"path":"https://dtwilson.github.io/BOSSS/reference/objectives.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create a set of objectives — objectives","text":"","code":"objectives(name = c(\"min_n\", \"min_k\"),                      out = c(\"n\", \"k\"),                      hyp = c(\"alt\", \"alt\"),                      weight = c(10, 1)) #>    name out hyp weight #> 1 min_n   n alt     10 #> 2 min_k   k alt      1"},{"path":"https://dtwilson.github.io/BOSSS/reference/plot.BOSSS_solution.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot the Pareto front of a BOSSS solution — plot.BOSSS_solution","title":"Plot the Pareto front of a BOSSS solution — plot.BOSSS_solution","text":"Plot Pareto front BOSSS solution","code":""},{"path":"https://dtwilson.github.io/BOSSS/reference/plot.BOSSS_solution.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot the Pareto front of a BOSSS solution — plot.BOSSS_solution","text":"","code":"# S3 method for class 'BOSSS_solution' plot(x, y, ...)"},{"path":"https://dtwilson.github.io/BOSSS/reference/plot.BOSSS_solution.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot the Pareto front of a BOSSS solution — plot.BOSSS_solution","text":"x BOSSS solution. y used. ... arguments method.","code":""},{"path":"https://dtwilson.github.io/BOSSS/reference/plot.BOSSS_solution.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot the Pareto front of a BOSSS solution — plot.BOSSS_solution","text":"ggplot object two- three-dimension Pareto fronts.","code":""},{"path":"https://dtwilson.github.io/BOSSS/reference/print.BOSSS_solution.html","id":null,"dir":"Reference","previous_headings":"","what":"Print the Pareto set of a BOSSS solution — print.BOSSS_solution","title":"Print the Pareto set of a BOSSS solution — print.BOSSS_solution","text":"Print Pareto set BOSSS solution","code":""},{"path":"https://dtwilson.github.io/BOSSS/reference/print.BOSSS_solution.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Print the Pareto set of a BOSSS solution — print.BOSSS_solution","text":"","code":"# S3 method for class 'BOSSS_solution' print(x, ...)"},{"path":"https://dtwilson.github.io/BOSSS/reference/print.BOSSS_solution.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Print the Pareto set of a BOSSS solution — print.BOSSS_solution","text":"x BOSSS solution. ... arguments method.","code":""},{"path":"https://dtwilson.github.io/BOSSS/reference/print.BOSSS_solution.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Print the Pareto set of a BOSSS solution — print.BOSSS_solution","text":"data.frame containing Pareto set corresponding (unweighted) objective values.","code":""},{"path":"https://dtwilson.github.io/BOSSS/reference/sensitivity.html","id":null,"dir":"Reference","previous_headings":"","what":"Run a one-dimensional sensitivity analysis — sensitivity","title":"Run a one-dimensional sensitivity analysis — sensitivity","text":"Run one-dimensional sensitivity analysis","code":""},{"path":"https://dtwilson.github.io/BOSSS/reference/sensitivity.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Run a one-dimensional sensitivity analysis — sensitivity","text":"","code":"sensitivity(sa_hypothesis, design, problem, solution, num_eval = 20, N = 100)"},{"path":"https://dtwilson.github.io/BOSSS/reference/sensitivity.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Run a one-dimensional sensitivity analysis — sensitivity","text":"sa_hypothesis Data frame defining SA variable bounds design Design tested problem BOSSS problem solution BOSSS solution num_eval Number points evaluate N Number MC samples use evaluation","code":""},{"path":"https://dtwilson.github.io/BOSSS/reference/sensitivity.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Run a one-dimensional sensitivity analysis — sensitivity","text":"matrix estimated means variances simulation output SA variable range.","code":""},{"path":"https://dtwilson.github.io/BOSSS/reference/update_constraint.html","id":null,"dir":"Reference","previous_headings":"","what":"Update problem constraints — update_constraint","title":"Update problem constraints — update_constraint","text":"Update problem constraints","code":""},{"path":"https://dtwilson.github.io/BOSSS/reference/update_constraint.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Update problem constraints — update_constraint","text":"","code":"update_constraint(   problem,   number = NULL,   name = NULL,   nom = NULL,   delta = NULL )"},{"path":"https://dtwilson.github.io/BOSSS/reference/update_constraint.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Update problem constraints — update_constraint","text":"problem BOSSS problem number index constraint(s) updated name name constraint(s) updated nom new nominal value(s) delta new acceptance threshold(s)","code":""},{"path":"https://dtwilson.github.io/BOSSS/reference/update_constraint.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Update problem constraints — update_constraint","text":"updated BOSSS problem object.","code":""},{"path":"https://dtwilson.github.io/BOSSS/news/index.html","id":"bosss-development-version","dir":"Changelog","previous_headings":"","what":"BOSSS (development version)","title":"BOSSS (development version)","text":"Initial CRAN submission.","code":""}]
